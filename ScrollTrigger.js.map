{"version":3,"sources":["webpack://ScrollTrigger/webpack/universalModuleDefinition","webpack://ScrollTrigger/webpack/bootstrap","webpack://ScrollTrigger/./demo/canvas.js","webpack://ScrollTrigger/./demo/main.js","webpack://ScrollTrigger/./demo/point.js","webpack://ScrollTrigger/./demo/scene.js","webpack://ScrollTrigger/./node_modules/object-extend/lib/extend.js","webpack://ScrollTrigger/./src/ScrollTrigger.js","webpack://ScrollTrigger/./src/config/DefaultOptions.js","webpack://ScrollTrigger/./src/extensions/Array.js","webpack://ScrollTrigger/./src/scripts/ScrollAnimationLoop.js","webpack://ScrollTrigger/./src/scripts/Trigger.js","webpack://ScrollTrigger/./src/scripts/TriggerCollection.js"],"names":["FRAME_RATE","FRAME_RATE_SECONDS","Canvas","ctx","w","h","width","height","scene","Scene","lastDraw","update","now","Date","diff","clearRect","draw","reset","val","scrollDelta","document","window","trigger","ScrollTrigger","once","offset","element","x","y","rect","direction","viewport","frame","visible","toggle","out","callback","Promise","resolve","reject","setTimeout","scroll","sustain","didScroll","start","stop","directionChange","canvasElement","querySelector","getContext","innerWidth","innerHeight","density","isDrawing","canvas","setup","addTriggers","addEventListener","resize","devicePixelRatio","undefined","scale","add","counterCallback","console","info","counterElement","counter","parseInt","innerText","position","delta","map","value","start1","stop1","start2","stop2","requestAnimationFrame","didResize","POINT_RADIUS","MIN_SPEED","MAX_SPEED","getRandomNegative","from","to","rand","Math","random","Point","id","xExtra","yExtra","xSpeed","ySpeed","beginPath","arc","calcX","calcY","PI","fill","AMOUNT_DELTA","CONNECT_DISTANCE","LINE_WIDTH","globalCompositeOperation","points","populate","amount","ceil","i","point","push","length","fillStyle","linesById","reference","distanceX","abs","distanceY","distance","sqrt","pow","tag","hasOwnProperty","x1","y1","x2","y2","lines","Object","values","line","alpha","strokeStyle","lineWidth","moveTo","lineTo","stroke","Trigger","_Trigger","TriggerCollection","_TriggerCollection","ScrollAnimationLoop","_ScrollAnimationLoop","options","_parseOptions","_initCollection","_initLoop","extend","DefaultOptions","defaultTrigger","scrollOptions","scrollAttributes","querySelectorAll","elements","createTriggers","collection","loop","_scrollCallback","_scrollStart","_scrollStop","_scrollDirectionChange","call","checkVisibility","triggers","each","createTrigger","objects","HTMLElement","NodeList","Array","isArray","remove","search","query","toString","selector","kill","prototype","fn","l","e","filter","getPosition","lastAction","_getTimestamp","_startRun","_boundListener","_didScroll","bind","defaults","startCallback","stopCallback","newPosition","newDirection","running","_loop","left","pageXOffset","scrollLeft","documentElement","top","pageYOffset","scrollTop","Number","_stopRun","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","_tick","removeEventListener","isInt","n","isFloat","active","parent","parentWidth","offsetWidth","parentHeight","offsetHeight","parentFrame","getBounds","_checkVisibility","response","_toggleCallback","then","_toggleClass","error","getBoundingClientRect","elementOffset","_getElementOffset","viewportOffset","_getViewportOffset","className","classList","hit","object","parentNode","nodes","slice","indexOf","found","el"],"mappings":"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","file":"ScrollTrigger.js?945a845231bcfd009389","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ScrollTrigger\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ScrollTrigger\"] = factory();\n\telse\n\t\troot[\"ScrollTrigger\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./demo/main.js\");\n","import Scene from './scene'\n\nconst FRAME_RATE = 60\nconst FRAME_RATE_SECONDS = 1000 / FRAME_RATE\n\nexport default class Canvas {\n    constructor(ctx, w, h) {\n        this.ctx = ctx\n        this.width = w\n        this.height = h\n\n        this.scene = new Scene(ctx, w, h)\n        this.lastDraw = null\n    }\n\n    update() {\n        this.scene.update(this.width, this.height)\n    }\n\n    set scrollDelta(val) {\n        this.scene.scrollDelta = val\n    }\n\n    draw() {\n        const now = Date.now()\n\n        if (this.lastDraw !== null) {\n            const diff = now - this.lastDraw\n\n            if (diff < FRAME_RATE_SECONDS) { return }\n        }\n\n        this.ctx.clearRect(0, 0, this.width, this.height)\n        this.scene.draw()\n\n        this.lastDraw = now\n    }\n\n    didResize() {\n        this.scene.reset()\n    }\n}\n","import ScrollTrigger, { Trigger } from '../src/ScrollTrigger'\nimport Canvas from './canvas'\n\n((document, window) => {\n    // This is where the magic happens, start by initializing a ScrollTrigger\n    // instance. We can set default options for all triggers in the constructor.\n    //\n    // We set some default 'trigger' options, and add a custom callback for\n    // the didScroll method. Also we set the scroll sustain to 800ms.\n    const trigger = new ScrollTrigger({\n        // Set custom (default) options for the triggers, these can be overwritten\n        // when adding new triggers to the ScrollTrigger instance. If you pass\n        // options when adding new triggers, you'll only need to pass the object\n        // `trigger`, e.g. { once: false }\n        trigger: {\n            // If the trigger should just work one time\n            once: false,\n            offset: {\n                // Set an offset based on the elements position, returning an\n                // integer = offset in px, float = offset in percentage of either\n                // width (when setting the x offset) or height (when setting y)\n                //\n                // So setting an yOffset of 0.2 means 20% of the elements height,\n                // the callback / class will be toggled when the element is 20%\n                // in the viewport.\n                element: {\n                    x: 0,\n                    y: (trigger, rect, direction) => {\n                        // You can add custom offsets according to callbacks, you\n                        // get passed the trigger, rect (DOMRect) and the scroll\n                        // direction, a string of either top, left, right or\n                        // bottom.\n                        return 0.2\n                    }\n                },\n                // Setting an offset of 0.2 on the viewport means the trigger\n                // will be called when the element is 20% in the viewport. So if\n                // your screen is 1200x600px, the trigger will be called when the\n                // user has scrolled for 120px.\n                viewport: {\n                    x: 0,\n                    y: (trigger, frame, direction) => {\n                        // We check if the trigger is visible, if so, the offset\n                        // on the viewport is 0, otherwise it's 20% of the height\n                        // of the viewport. This causes the triggers to animate\n                        // 'on screen' when the element is in the viewport, but\n                        // don't trigger the 'out' class until the element is out\n                        // of the viewport.\n\n                        // This is the same as returning Math.ceil(0.2 * frame.h)\n                        return trigger.visible ? 0 : 0.2\n                    }\n                }\n            },\n            toggle: {\n                // The class(es) that should be toggled\n                class: {\n                    in: 'visible', // Either a string, or an array of strings\n                    out: ['invisible', 'extraClassToToggleWhenHidden']\n                },\n                callback: {\n                    // A callback when the element is going in the viewport, you can\n                    // return a Promise here, the trigger will not be called until\n                    // the promise resolves.\n                    in: null,\n                    // A callback when the element is visible on screen, keeps\n                    // on triggering for as long as 'sustain' is set\n                    visible: null,\n                    // A callback when the element is going out of the viewport.\n                    // You can also return a promise here, like in the 'in' callback.\n                    //\n                    // Here an example where all triggers take 10ms to trigger\n                    // the 'out' class.\n                    out: (trigger) => {\n                        // `trigger` contains the Trigger object that goes out\n                        // of the viewport\n                        return new Promise((resolve, reject) => {\n                            setTimeout(resolve, 10)\n                        })\n                    }\n                }\n            },\n        },\n        // Set custom options and callbacks for the ScrollAnimationLoop\n        scroll: {\n            // The amount of ms the scroll loop should keep triggering after the\n            // scrolling has stopped. This is sometimes nice for canvas\n            // animations.\n            sustain: 200,\n            // Window|HTMLDocument|HTMLElement to check for scroll events\n            element: window,\n            // Add a callback when the user has scrolled, keeps on triggering for\n            // as long as the sustain is set to do\n            callback: didScroll,\n            // Callback when the user started scrolling\n            start: () => {},\n            // Callback when the user stopped scrolling\n            stop: () => {},\n            // Callback when the user changes direction in scrolling\n            directionChange: () => {}\n        }\n    })\n\n    const canvasElement = document.querySelector('canvas'),\n                    ctx = canvasElement.getContext('2d')\n\n    let w = canvasElement.width = window.innerWidth,\n        h = canvasElement.height = window.innerHeight,\n        density = 1, isDrawing = true\n\n    const canvas = new Canvas(ctx, w, h)\n\n    function setup() {\n        // Add the triggers\n        addTriggers()\n\n        // Basic canvas setup\n        window.addEventListener('resize', resize)\n\n        density = window.devicePixelRatio != undefined ? window.devicePixelRatio : 1.0\n\n        canvasElement.width = w * density\n        canvasElement.height = h * density\n\n        canvas.width = w\n        canvas.height = h\n\n        ctx.scale(density,density)\n\n        draw()\n    }\n\n    function addTriggers() {\n        // Adding triggers can be done in multiple ways, the easiest is to pass\n        // a querySelector.\n        trigger.add('[data-slideInLeft]')\n               .add('[data-slideInRight]')\n               .add('[data-slideInBottom]')\n\n        // Add the trigger for the callback example, also add a custom callback\n        // when the trigger becomes visible. As an example we pass an HTMLElement\n        // instead of a querySelector.\n        const element = document.querySelector('[data-callback]')\n        trigger.add(element, {\n            toggle: {\n                callback: {\n                    in: counterCallback\n                }\n            }\n        })\n    }\n\n    function counterCallback(trigger) {\n        // In the callback we get passed the Trigger object, from here we have\n        // access to the responding HTMLElement among other things. You could,\n        // for instance, change the class it toggles, or attach another callback.\n        // Check the console for more info.\n        console.info(trigger)\n\n        // For now, we just append the counter\n        const counterElement = trigger.element.querySelector('span')\n        const counter = parseInt(counterElement.innerText)\n\n        counterElement.innerText = counter + 1\n    }\n\n    function didScroll(position) {\n        // calculate the delta, from 0 to 1 (when having 1 screen height) to\n        // animate with\n        const delta = (position.y / window.innerHeight)\n\n        canvas.scrollDelta = delta\n\n        // change the backgroundColor accordingly\n        // const lightness = map(delta, 0, 1, 5, 76)\n        // const saturation = map(delta, 0, 1, 84, 0)\n\n        // document.body.style.backgroundColor = `hsl(186, ${saturation}%, ${lightness}%)`\n\n        // check if the canvas is on-screen, otherwise stop the animationLoop.\n        if (position.y > window.innerHeight) {\n            isDrawing = false\n        } else if (!isDrawing) {\n            isDrawing = true\n\n            draw()\n        }\n    }\n\n    function map(value, start1, stop1, start2, stop2) {\n        return (value - start1) / (stop1 - start1) * (stop2 - start2) + start2\n    }\n\n    function draw() {\n        canvas.update()\n        canvas.draw()\n\n        if (isDrawing) {\n            window.requestAnimationFrame(draw)\n        }\n    }\n\n    function resize() {\n        w = canvasElement.width = window.innerWidth\n        h = canvasElement.height = window.innerHeight\n\n        canvasElement.width = w * density\n        canvasElement.height = h * density\n\n        canvas.width = w\n        canvas.height = h\n\n        ctx.scale(density, density)\n\n        canvas.didResize()\n    }\n\n    setup()\n})(document, window)\n","const POINT_RADIUS = 3.5\nconst MIN_SPEED = 0.05\nconst MAX_SPEED = 0.1\n\nfunction getRandomNegative(from, to) {\n    const rand = from + (Math.random() * (to - from))\n\n    return Math.random() > 0.5 ? rand : -rand\n}\n\nexport default class Point {\n    constructor(id, w, h) {\n        this.id = id\n        this.x = Math.random() * w\n        this.y = Math.random() * h\n        this.xExtra = 0\n        this.yExtra = 0\n\n        this.xSpeed = getRandomNegative(MIN_SPEED, MAX_SPEED)\n        this.ySpeed = getRandomNegative(MIN_SPEED, MAX_SPEED)\n    }\n\n    update(w, h, delta) {\n        let xExtra = 0\n        let yExtra = 0\n\n        if (this.x > w / 2) {\n            this.xExtra = delta * (w / 2)\n        } else {\n            this.xExtra = -(delta * (w / 2))\n        }\n\n        if (this.y > h / 2) {\n            this.yExtra = delta * (h / 2)\n        } else {\n            this.yExtra = -(delta * (h / 2))\n        }\n\n        this.x += this.xSpeed\n        this.y += this.ySpeed\n\n        if (this.x < POINT_RADIUS || this.x + POINT_RADIUS > w) {\n            this.x = this.x < POINT_RADIUS ? POINT_RADIUS : (w - POINT_RADIUS)\n            this.xSpeed = -this.xSpeed\n        }\n\n        if (this.y < POINT_RADIUS || this.y + POINT_RADIUS > h) {\n            this.y = this.y < POINT_RADIUS ? POINT_RADIUS : (h - POINT_RADIUS)\n            this.ySpeed = -this.ySpeed\n        }\n    }\n\n    get calcX() {\n        return this.x - this.xExtra\n    }\n\n    get calcY() {\n        return this.y - this.yExtra\n    }\n\n    draw(ctx) {\n        ctx.beginPath()\n        ctx.arc(this.calcX, this.calcY, POINT_RADIUS, 0, 2 * Math.PI);\n        ctx.fill()\n    }\n}\n","import Point from './point'\n\nconst AMOUNT_DELTA = 2.4\nconst CONNECT_DISTANCE = 260\nconst LINE_WIDTH = 2\n\nexport default class Scene {\n    constructor(ctx, w, h) {\n        this.ctx = ctx\n        this.width = w\n        this.height = h\n        this.scrollDelta = 0\n\n        this.ctx.globalCompositeOperation = 'lighter'\n\n        this.reset()\n    }\n\n    reset() {\n        this.points = []\n\n        this.populate()\n    }\n\n    populate() {\n        const amount = Math.ceil(((this.width + this.height) / 100) * AMOUNT_DELTA)\n\n        for (let i = 0; i < amount; i++) {\n            const point = new Point(i, this.width, this.height)\n\n            this.points.push(point)\n        }\n    }\n\n    update(w, h) {\n        this.width = w\n        this.height = h\n\n        for (let i = 0; i < this.points.length; i++) {\n            const point = this.points[i]\n\n            point.update(w, h, this.scrollDelta)\n        }\n    }\n\n    draw() {\n        this.ctx.fillStyle = '#2B7174'\n\n        let linesById = {}\n\n        for (let x = 0; x < this.points.length; x++) {\n            const point = this.points[x]\n\n            point.draw(this.ctx)\n\n            for (let y = 0; y < this.points.length; y++) {\n                const reference = this.points[y]\n\n                if (reference.id === point.id) { continue }\n\n                const distanceX = Math.abs(point.calcX - reference.calcX)\n                const distanceY = Math.abs(point.calcY - reference.calcY)\n                const distance = Math.sqrt(Math.pow(distanceX, 2) + Math.pow(distanceY, 2))\n\n                if (distance <= CONNECT_DISTANCE) {\n                    const tag = point.id > reference.id ? `${reference.id}_${point.id}` : `${point.id}_${reference.id}`\n\n                    if (linesById.hasOwnProperty(tag)) { continue }\n\n                    linesById[tag] = { x1: point.calcX, y1: point.calcY, x2: reference.calcX, y2: reference.calcY, distance: distance }\n                }\n            }\n        }\n\n        const lines = Object.values(linesById)\n\n        for (let i = 0; i < lines.length; i++) {\n            const line = lines[i]\n            const alpha = 1.0 - (line.distance / CONNECT_DISTANCE)\n\n            this.ctx.strokeStyle = `rgba(98, 130, 94, ${alpha})`\n            this.ctx.lineWidth = LINE_WIDTH\n            this.ctx.beginPath()\n            this.ctx.moveTo(line.x1, line.y1)\n            this.ctx.lineTo(line.x2, line.y2)\n            this.ctx.stroke()\n        }\n    }\n}\n","/*!\n * object-extend\n * A well-tested function to deep extend (or merge) JavaScript objects without further dependencies.\n *\n * http://github.com/bernhardw\n *\n * Copyright 2013, Bernhard Wanger <mail@bernhardwanger.com>\n * Released under the MIT license.\n *\n * Date: 2013-04-10\n */\n\n\n/**\n * Extend object a with object b.\n *\n * @param {Object} a Source object.\n * @param {Object} b Object to extend with.\n * @returns {Object} a Extended object.\n */\nmodule.exports = function extend(a, b) {\n\n    // Don't touch 'null' or 'undefined' objects.\n    if (a == null || b == null) {\n        return a;\n    }\n\n    // TODO: Refactor to use for-loop for performance reasons.\n    Object.keys(b).forEach(function (key) {\n\n        // Detect object without array, date or null.\n        // TODO: Performance test:\n        // a) b.constructor === Object.prototype.constructor\n        // b) Object.prototype.toString.call(b) == '[object Object]'\n        if (Object.prototype.toString.call(b[key]) == '[object Object]') {\n            if (Object.prototype.toString.call(a[key]) != '[object Object]') {\n                a[key] = b[key];\n            } else {\n                a[key] = extend(a[key], b[key]);\n            }\n        } else {\n            a[key] = b[key];\n        }\n\n    });\n\n    return a;\n\n};","/*!\n * ScrollTrigger\n *\n *\n * http://github.com/terwanerik\n *\n * Copyright 2017, Erik Terwan <erik@erikterwan.com>\n * Released under the MIT license.\n *\n * Date: 2017-07-09\n */\n\n/**\n * Created by Erik on 09/07/2017.\n */\nimport DefaultOptions from './config/DefaultOptions'\nimport _Trigger from './scripts/Trigger'\nimport _TriggerCollection from './scripts/TriggerCollection'\nimport _ScrollAnimationLoop from './scripts/ScrollAnimationLoop'\n\nimport extend from 'object-extend'\nimport './extensions/Array'\n\nexport const Trigger = _Trigger\nexport const TriggerCollection = _TriggerCollection\nexport const ScrollAnimationLoop = _ScrollAnimationLoop\n\nexport default class ScrollTrigger {\n\t/**\n\t * Constructor for the scroll trigger\n\t * @param {DefaultOptions} [options=DefaultOptions] options\n\t */\n\tconstructor(options) {\n\t\tthis._parseOptions(options)\n\t\tthis._initCollection()\n\t\tthis._initLoop()\n\t}\n\n\t/**\n\t * Parses the options\n\t * @param {DefaultOptions} [options=DefaultOptions] options\n\t * @private\n\t */\n\t_parseOptions(options) {\n\t\toptions = extend(new DefaultOptions(), options)\n\n\t\tthis.defaultTrigger = options.trigger\n\t\tthis.scrollOptions = options.scroll\n\t}\n\n\t/**\n\t * Initializes the collection, picks all [data-scroll] elements as initial elements\n\t * @private\n\t */\n\t_initCollection() {\n\t\tconst scrollAttributes = document.querySelectorAll('[data-scroll]')\n\t\tlet elements = []\n\n\t\tif (scrollAttributes.length > 0) {\n\t\t\telements = this.createTriggers(scrollAttributes)\n\t\t}\n\n\t\tthis.collection = new TriggerCollection(elements)\n\t}\n\n\t/**\n\t * Initializes the scroll loop\n\t * @private\n\t */\n\t_initLoop() {\n\t\tthis.loop = new ScrollAnimationLoop({\n\t\t\tsustain: this.scrollOptions.sustain,\n\t\t\telement: this.scrollOptions.element,\n\t\t\tcallback: (position, direction) => {\n\t\t\t\tthis._scrollCallback(position, direction)\n\t\t\t},\n\t\t\tstart: () => {\n\t\t\t\tthis._scrollStart()\n\t\t\t},\n\t\t\tstop: () => {\n\t\t\t\tthis._scrollStop()\n\t\t\t},\n\t\t\tdirectionChange: (direction) => {\n\t\t\t\tthis._scrollDirectionChange(direction)\n\t\t\t}\n\t\t})\n\t}\n\n\t/**\n\t * Callback for checking triggers\n\t * @param {{x: number, y: number}} position\n\t * @param {string} direction\n\t * @private\n\t */\n\t_scrollCallback(position, direction) {\n\t\tthis.collection.call((trigger) => {\n\t\t\ttrigger.checkVisibility(this.scrollOptions.element, direction)\n\t\t})\n\n\t\tthis.scrollOptions.callback(position, direction)\n\t}\n\n\t/**\n\t * When the scrolling started\n\t * @private\n\t */\n\t_scrollStart() {\n\t\tthis.scrollOptions.start()\n\t}\n\n\t/**\n\t * When the scrolling stopped\n\t * @private\n\t */\n\t_scrollStop() {\n\t\tthis.scrollOptions.stop()\n\t}\n\n\t/**\n\t * When the direction changes\n\t * @param {string} direction\n\t * @private\n\t */\n\t_scrollDirectionChange(direction) {\n\t\tthis.scrollOptions.directionChange(direction)\n\t}\n\n\t/**\n\t * Creates a Trigger object from a given element and optional option set\n\t * @param {HTMLElement} element\n\t * @param {DefaultOptions.trigger} [options=DefaultOptions.trigger] options\n\t * @returns Trigger\n\t */\n\tcreateTrigger(element, options) {\n\t\treturn new Trigger(element, extend(this.defaultTrigger, options))\n\t}\n\n\t/**\n\t * Creates an array of triggers\n\t * @param {HTMLElement[]|NodeList} elements\n\t * @param {Object} [options=null] options\n\t * @returns {Trigger[]} Array of triggers\n\t */\n\tcreateTriggers(elements, options) {\n\t\tlet triggers = []\n\n\t\telements.each((element) => {\n\t\t\ttriggers.push(this.createTrigger(element, options))\n\t\t})\n\n\t\treturn triggers\n\t}\n\n\t/**\n\t * Adds triggers\n\t * @param {string|HTMLElement|NodeList|Trigger|Trigger[]} objects A list of objects or a query\n\t * @param {Object} [options=null] options\n\t * @returns {ScrollTrigger}\n\t */\n\tadd(objects, options) {\n\t\tif (objects instanceof HTMLElement) {\n\t\t\tthis.collection.add(this.createTrigger(objects, options))\n\n\t\t\treturn this\n\t\t}\n\n\t\tif (objects instanceof Trigger) {\n\t\t\tthis.collection.add(objects)\n\n\t\t\treturn this\n\t\t}\n\n\t\tif (objects instanceof NodeList) {\n\t\t\tthis.collection.add(this.createTriggers(objects, options))\n\n\t\t\treturn this\n\t\t}\n\n\t\tif (Array.isArray(objects) && objects.length && objects[0] instanceof Trigger) {\n\t\t\tthis.collection.add(objects)\n\n\t\t\treturn this\n\t\t}\n\n\t\tif (Array.isArray(objects) && objects.length && objects[0] instanceof HTMLElement) {\n\t\t\tthis.collection.add(this.createTriggers(objects, options))\n\n\t\t\treturn this\n\t\t}\n\n\t\t// assume it's a query string\n\t\tthis.collection.add(this.createTriggers(document.querySelectorAll(objects), options))\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Removes triggers\n\t * @param {string|HTMLElement|NodeList|Trigger|Trigger[]} objects A list of objects or a query\n\t * @returns {ScrollTrigger}\n\t */\n\tremove(objects) {\n\t\tif (objects instanceof Trigger) {\n\t\t\tthis.collection.remove(objects)\n\n\t\t\treturn this\n\t\t}\n\n\t\tif (Array.isArray(objects) && objects.length && objects[0] instanceof Trigger) {\n\t\t\tthis.collection.remove(objects)\n\n\t\t\treturn this\n\t\t}\n\n\t\tif (objects instanceof HTMLElement) {\n\t\t\tthis.collection.remove(this.search(objects))\n\n\t\t\treturn this\n\t\t}\n\n\t\tif (Array.isArray(objects) && objects.length && objects[0] instanceof HTMLElement) {\n\t\t\tthis.collection.remove(this.search(objects))\n\n\t\t\treturn this\n\t\t}\n\n\t\tif (objects instanceof NodeList) {\n\t\t\tthis.collection.remove(this.search(objects))\n\n\t\t\treturn this\n\t\t}\n\n\t\tif (Array.isArray(objects) && objects.length && objects[0] instanceof Trigger) {\n\t\t\tthis.collection.remove(objects)\n\n\t\t\treturn this\n\t\t}\n\n\t\t// assume it's a query string\n\t\tthis.collection.remove(this.query(objects.toString()))\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Lookup one or multiple triggers by a query string\n\t * @param {string} selector\n\t * @returns {Trigger[]}\n\t */\n\tquery(selector) {\n\t\treturn this.collection.query(selector)\n\t}\n\n\t/**\n\t * Lookup one or multiple triggers by a certain HTMLElement or NodeList\n\t * @param {HTMLElement|HTMLElement[]|NodeList} element\n\t * @returns {Trigger|Trigger[]|null}\n\t */\n\tsearch(element) {\n\t\treturn this.collection.search(element)\n\t}\n\n\t/**\n\t * Reattaches the scroll listener\n\t */\n\tlisten() {\n\t\tif (this.loop) { return }\n\n\t\tthis._initLoop()\n\t}\n\n\t/**\n\t * Kills the scroll listener\n\t */\n\tkill() {\n\t\tthis.loop.kill()\n\t\tthis.loop = null\n\t}\n}\n","/**\n * Default options for ScrollTrigger\n */\nexport default function() {\n\t/**\n\t * The default options for a trigger\n\t *\n\t * @type {\n\t * {\n\t *  once: boolean,\n\t *  offset: {\n\t *    viewport: {\n\t *      x: number|(function(frame, direction)),\n\t *      y: number|(function(frame, direction))\n\t *    },\n\t *    element: {\n\t *      x: number|(function(rect, direction)),\n\t *      y: number|(function(rect, direction))\n\t *    }\n\t *  },\n\t *  toggle: {\n\t *    class: {\n\t *      in: string|string[],\n\t *      out: string|string[]\n\t *    },\n\t *  callback: {\n\t *    in: {TriggerInCallback},\n     *    visible: (function()),\n\t *    out: (function())\n\t *  }\n\t * }\n\t * }}\n\t */\n\tthis.trigger = {\n\t\tonce: false,\n\t\toffset: {\n\t\t\tviewport: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0\n\t\t\t},\n\t\t\telement: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0\n\t\t\t}\n\t\t},\n\t\ttoggle: {\n\t\t\tclass: {\n\t\t\t\tin: 'visible',\n\t\t\t\tout: 'invisible'\n\t\t\t},\n\t\t\tcallback: {\n\t\t\t\tin: null,\n        \t\tvisible: null,\n\t\t\t\tout: null\n\t\t\t}\n\t\t}\n\t}\n\n    /**\n     * The `in` callback is called when the element enters the viewport\n     * @callback TriggerInCallback\n     * @param {{x: Number, y: Number}} position\n     * @param {string} direction\n     */\n\n\t/**\n\t * The default options for the scroll behaviour\n\t * @type {\n\t * {\n\t *  sustain: number,\n\t *  element: Window|HTMLDocument|HTMLElement,\n\t *  callback: {ScrollCallback},\n\t *  start: (function()),\n\t *  stop: (function()),\n\t *  directionChange: (function(direction: {string}))\n\t * }\n\t * }\n\t */\n\tthis.scroll = {\n\t\tsustain: 300,\n\t\telement: window,\n\t\tcallback: () => {},\n\t\tstart: () => {},\n\t\tstop: () => {},\n\t\tdirectionChange: () => {}\n\t}\n\n    /**\n     * The scroll callback is called when the user scrolls\n     * @callback ScrollCallback\n     * @param {{x: Number, y: Number}} position\n     * @param {string} direction\n     */\n}\n","/**\n * Faster than .forEach\n * @param {(function())} fn The function to call\n */\nArray.prototype.each = function (fn) {\n\tconst l = this.length\n\n\tfor(let i = 0; i < l; i++) {\n\t\tconst e = this[i]\n\n\t\tif (e) {\n\t\t\tfn(e,i)\n\t\t}\n\t}\n}\n\n/**\n * Give NodeList some Array functions\n */\nNodeList.prototype.each = Array.prototype.each\nNodeList.prototype.filter = Array.prototype.filter\n","import DefaultOptions from '../config/DefaultOptions'\nimport extend from 'object-extend'\nimport '../extensions/Array'\n\nexport default class ScrollAnimationLoop {\n\t/**\n\t * ScrollAnimationLoop constructor.\n\t * Starts a requestAnimationFrame loop as long as the user has scrolled the scrollElement. Stops after a certain time.\n\t *\n\t * @param {DefaultOptions.scroll} [options=DefaultOptions.scroll] options The options for the loop\n\t * @param {ScrollCallback} callback [loop=null] The loop callback\n\t */\n\tconstructor(options, callback) {\n\t\tthis._parseOptions(options)\n\n\t\tif (typeof callback === 'function') {\n\t\t\tthis.callback = callback\n\t\t}\n\n\t\tthis.direction = 'none'\n\t\tthis.position = this.getPosition()\n\t\tthis.lastAction = this._getTimestamp()\n\n\t\tthis._startRun()\n\n\t\tthis._boundListener = this._didScroll.bind(this)\n\t\tthis.element.addEventListener('scroll', this._boundListener)\n\t}\n\n\t/**\n\t * Parses the options\n\t *\n\t * @param {DefaultOptions.scroll} [options=DefaultOptions.scroll] options The options for the loop\n\t * @private\n\t */\n\t_parseOptions(options) {\n\t\tlet defaults = new DefaultOptions().scroll\n\n\t\tif (typeof options != 'function') {\n\t\t\tdefaults.callback = () => {}\n\n            defaults = extend(defaults, options)\n\t\t} else {\n\t\t\tdefaults.callback = options\n\t\t}\n\n\t\tthis.element = defaults.element\n\t\tthis.sustain = defaults.sustain\n\t\tthis.callback = defaults.callback\n\t\tthis.startCallback = defaults.start\n\t\tthis.stopCallback = defaults.stop\n\t\tthis.directionChange = defaults.directionChange\n\t}\n\n\t/**\n\t * Callback when the user scrolled the element\n\t * @private\n\t */\n\t_didScroll() {\n\t\tconst newPosition = this.getPosition()\n\n\t\tif (this.position !== newPosition) {\n\t\t\tlet newDirection = this.direction\n\n\t\t\tif (newPosition.x !== this.position.x) {\n\t\t\t\tnewDirection = newPosition.x > this.position.x ? 'right' : 'left'\n\t\t\t} else if (newPosition.y !== this.position.y) {\n\t\t\t\tnewDirection = newPosition.y > this.position.y ? 'bottom' : 'top'\n\t\t\t} else {\n\t\t\t\tnewDirection = 'none'\n\t\t\t}\n\n\t\t\tif (newDirection !== this.direction) {\n\t\t\t\tthis.direction = newDirection\n\n                if (typeof this.directionChange === 'function') {\n                    this.directionChange(this.direction)\n                }\n\t\t\t}\n\n\t\t\tthis.position = newPosition\n\t\t\tthis.lastAction = this._getTimestamp()\n\t\t} else {\n            this.direction = 'none'\n        }\n\n\t\tif (!this.running) {\n\t\t\tthis._startRun()\n\t\t}\n\t}\n\n\t/**\n\t * Starts the loop, calls the start callback\n\t * @private\n\t */\n\t_startRun() {\n\t\tthis.running = true\n\n        if (typeof this.startCallback === 'function') {\n            this.startCallback()\n        }\n\n\t\tthis._loop()\n\t}\n\n\t/**\n\t * Stops the loop, calls the stop callback\n\t * @private\n\t */\n\t_stopRun() {\n\t\tthis.running = false\n\n        if (typeof this.stopCallback === 'function') {\n            this.stopCallback()\n        }\n\t}\n\n\t/**\n\t * The current position of the element\n\t * @returns {{x: number, y: number}}\n\t */\n\tgetPosition() {\n\t\tconst left = this.element.pageXOffset || this.element.scrollLeft || document.documentElement.scrollLeft || 0\n\t\tconst top = this.element.pageYOffset || this.element.scrollTop || document.documentElement.scrollTop || 0\n\n\t\treturn { x: left, y: top }\n\t}\n\n\t/**\n\t * The current timestamp in ms\n\t * @returns {number}\n\t * @private\n\t */\n\t_getTimestamp() {\n\t\treturn Number(Date.now())\n\t}\n\n\t/**\n\t * One single tick of the animation\n\t * @private\n\t */\n\t_tick() {\n\t\tthis.callback(this.position, this.direction)\n\n\t\tconst now = this._getTimestamp()\n\n\t\tif (now - this.lastAction > this.sustain) {\n\t\t\tthis._stopRun()\n\t\t}\n\n\t\tif (this.running) {\n\t\t\tthis._loop()\n\t\t}\n\t}\n\n\t/**\n\t * Requests an animation frame\n\t * @private\n\t */\n\t_loop() {\n\t\tconst frame = window.requestAnimationFrame ||\n\t\t\twindow.webkitRequestAnimationFrame ||\n\t\t\twindow.mozRequestAnimationFrame ||\n\t\t\twindow.msRequestAnimationFrame ||\n\t\t\twindow.oRequestAnimationFrame ||\n\t\t\t((callback) => { setTimeout(callback, 1000 / 60) })\n\n\t\tframe(this._tick.bind(this))\n\t}\n\n\t/**\n\t * Kills the loop forever\n\t */\n\tkill() {\n\t\tthis.running = false\n\t\tthis.element.removeEventListener('scroll', this._boundListener)\n\t}\n}\n","import DefaultOptions from '../config/DefaultOptions'\nimport extend from 'object-extend'\nimport '../extensions/Array'\n\nfunction isInt(n) {\n\treturn Number(n) === n && n % 1 === 0\n}\n\nfunction isFloat(n) {\n\treturn Number(n) === n && n % 1 !== 0\n}\n\nexport default class Trigger {\n\t/**\n\t * Creates a new Trigger from the given element and options\n\t *\n\t * @param {Element|HTMLElement} element\n\t * @param {DefaultOptions.trigger} [options=DefaultOptions.trigger] options\n\t */\n\tconstructor(element, options) {\n\t\tthis.element = element\n\n\t\toptions = extend(new DefaultOptions().trigger, options)\n\n\t\tthis.offset = options.offset\n\t\tthis.toggle = options.toggle\n\t\tthis.once = options.once\n\t\tthis.visible = null\n\t\tthis.active = true\n\t}\n\n\t/**\n\t * Checks if the Trigger is in the viewport, calls the callbacks and toggles the classes\n\t * @param {HTMLElement|HTMLDocument|Window} parent\n\t * @param {string} direction top, bottom, left, right\n\t * @returns {boolean} If the element is visible\n\t */\n\tcheckVisibility(parent, direction) {\n\t\tif (!this.active) {\n\t\t\treturn this.visible\n\t\t}\n\n\t\tconst parentWidth = parent.offsetWidth || parent.innerWidth || 0\n\t\tconst parentHeight = parent.offsetHeight || parent.innerHeight || 0\n\n\t\tconst parentFrame = { w: parentWidth, h: parentHeight }\n\t\tconst rect = this.getBounds()\n\n\t\tconst visible = this._checkVisibility(rect, parentFrame, direction)\n\n\t\tif (visible !== this.visible) {\n\t\t\tthis.visible = visible\n\n\t\t\tconst response = this._toggleCallback()\n\n\t\t\tif (response instanceof Promise) {\n\t\t\t\t\tresponse.then(this._toggleClass.bind(this)).catch(e => {\n\t\t\t\t\t\tconsole.error('Trigger promise failed')\n\t\t\t\t\t\tconsole.error(e)\n\t\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t\tthis._toggleClass()\n\t\t\t}\n\n\t\t\tif (this.visible && this.once) {\n\t\t\t\tthis.active = false\n\t\t\t}\n\t\t} else if (visible) {\n\t\t\t\tif (typeof this.toggle.callback.visible == 'function') {\n\t\t\t\t\t\treturn this.toggle.callback.visible.call(this.element, this)\n\t\t\t\t}\n\t\t}\n\n\t\treturn visible\n\t}\n\n\t/**\n\t * Get the bounds of this element\n\t * @return {ClientRect | DOMRect}\n\t */\n\tgetBounds() {\n  \treturn this.element.getBoundingClientRect()\n\t}\n\n\t/**\n\t * Get the calculated offset to place on the element\n\t * @param {ClientRect} rect\n\t * @param {string} direction top, bottom, left, right\n\t * @returns {{x: number, y: number}}\n\t * @private\n\t */\n\t_getElementOffset(rect, direction) {\n\t\tlet offset = { x: 0, y: 0 }\n\n\t\tif (typeof this.offset.element.x === 'function') {\n\t\t\toffset.x = rect.width * this.offset.element.x(this, rect, direction)\n\t\t} else if (isFloat(this.offset.element.x)) {\n\t\t\toffset.x = rect.width * this.offset.element.x\n\t\t} else if (isInt(this.offset.element.x)) {\n\t\t\toffset.x = this.offset.element.x\n\t\t}\n\n\t\tif (typeof this.offset.element.y === 'function') {\n\t\t\toffset.y = rect.height * this.offset.element.y(this, rect, direction)\n\t\t} else if (isFloat(this.offset.element.y)) {\n\t\t\toffset.y = rect.height * this.offset.element.y\n\t\t} else if (isInt(this.offset.element.y)) {\n\t\t\toffset.y = this.offset.element.y\n\t\t}\n\n\t\treturn offset\n\t}\n\n\t/**\n\t * Get the calculated offset to place on the viewport\n\t * @param {{w: number, h: number}} parent\n\t * @param {string} direction top, bottom, left, right\n\t * @returns {{x: number, y: number}}\n\t * @private\n\t */\n\t_getViewportOffset(parent, direction) {\n\t\tlet offset = { x: 0, y: 0 }\n\n\t\tif (typeof this.offset.viewport.x === 'function') {\n\t\t\toffset.x = parent.w * this.offset.viewport.x(this, parent, direction)\n\t\t} else if (isFloat(this.offset.viewport.x)) {\n\t\t\toffset.x = parent.w * this.offset.viewport.x\n\t\t} else if (isInt(this.offset.viewport.x)) {\n\t\t\toffset.x = this.offset.viewport.x\n\t\t}\n\n\t\tif (typeof this.offset.viewport.y === 'function') {\n\t\t\toffset.y = parent.h * this.offset.viewport.y(this, parent, direction)\n\t\t} else if (isFloat(this.offset.viewport.y)) {\n\t\t\toffset.y = parent.h * this.offset.viewport.y\n\t\t} else if (isInt(this.offset.viewport.y)) {\n\t\t\toffset.y = this.offset.viewport.y\n\t\t}\n\n\t\treturn offset\n\t}\n\n\t/**\n\t * Check the visibility of the trigger in the viewport, with offsets applied\n\t * @param {ClientRect} rect\n\t * @param {{w: number, h: number}} parent\n\t * @param {string} direction top, bottom, left, right\n\t * @returns {boolean}\n\t * @private\n\t */\n\t _checkVisibility(rect, parent, direction) {\n\t\tconst elementOffset = this._getElementOffset(rect, direction)\n\t\tconst viewportOffset = this._getViewportOffset(parent, direction)\n\n\t\tlet visible = true\n\n\t\tif ((rect.left - viewportOffset.x) < -(rect.width - elementOffset.x)) {\n\t\t\tvisible = false\n\t\t}\n\n\t\tif ((rect.left + viewportOffset.x) > (parent.w - elementOffset.x)) {\n\t\t\tvisible = false\n\t\t}\n\n\t\tif ((rect.top - viewportOffset.y) < -(rect.height - elementOffset.y)) {\n\t\t\tvisible = false\n\t\t}\n\n\t\tif ((rect.top + viewportOffset.y) > (parent.h - elementOffset.y)) {\n\t\t\tvisible = false\n\t\t}\n\n\t\treturn visible\n\t}\n\n\t/**\n\t * Toggles the classes\n\t * @private\n\t */\n\t_toggleClass() {\n\t\tif (this.visible) {\n\t\t\tif (Array.isArray(this.toggle.class.in)) {\n\t\t\t\tthis.toggle.class.in.each((className) => {\n\t\t\t\t\tthis.element.classList.add(className)\n\t\t\t\t})\n\t\t\t} else {\n      \tthis.element.classList.add(this.toggle.class.in)\n      }\n\n      if (Array.isArray(this.toggle.class.out)) {\n      \tthis.toggle.class.out.each((className) => {\n        \tthis.element.classList.remove(className)\n        })\n      } else {\n      \tthis.element.classList.remove(this.toggle.class.out)\n      }\n\n      return\n\t\t}\n\n\t\tif (Array.isArray(this.toggle.class.in)) {\n\t\t\tthis.toggle.class.in.each((className) => {\n\t\t\t\tthis.element.classList.remove(className)\n\t\t\t})\n\t\t} else {\n\t\t\tthis.element.classList.remove(this.toggle.class.in)\n    }\n\n\t\tif (Array.isArray(this.toggle.class.out)) {\n\t\t\tthis.toggle.class.out.each((className) => {\n\t\t\t\tthis.element.classList.add(className)\n\t\t\t})\n\t\t} else {\n    \tthis.element.classList.add(this.toggle.class.out)\n    }\n\t}\n\n\t/**\n\t * Toggles the callback\n\t * @private\n\t * @return null|Promise\n\t */\n\t_toggleCallback() {\n\t\tif (this.visible) {\n\t\t\tif (typeof this.toggle.callback.in == 'function') {\n\t\t\t\treturn this.toggle.callback.in.call(this.element, this)\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof this.toggle.callback.out == 'function') {\n\t\t\t\treturn this.toggle.callback.out.call(this.element, this)\n\t\t\t}\n\t\t}\n\t}\n}\n","import Trigger from './Trigger'\nimport '../extensions/Array'\n\nexport default class TriggerCollection {\n\t/**\n\t * Initializes the collection\n\t * @param {Trigger[]} [triggers=[]] triggers A set of triggers to init with, optional\n\t */\n\tconstructor(triggers) {\n\t\t/**\n\t\t * @member {Trigger[]}\n\t\t */\n\t\tthis.triggers = triggers instanceof Array ? triggers : []\n\t}\n\n\t/**\n\t * Adds one or multiple Trigger objects\n\t * @param {Trigger|Trigger[]} objects\n\t */\n\tadd(objects) {\n\t\tif (objects instanceof Trigger) {\n\t\t\t// single\n\t\t\treturn this.triggers.push(objects)\n\t\t}\n\n\t\tobjects.each((trigger) => {\n\t\t\tif (trigger instanceof Trigger) {\n\t\t\t\tthis.triggers.push(trigger)\n\t\t\t} else {\n\t\t\t\tconsole.error('Object added to TriggerCollection is not a Trigger. Object: ', trigger)\n\t\t\t}\n\t\t})\n\t}\n\n\t/**\n\t * Removes one or multiple Trigger objects\n\t * @param {Trigger|Trigger[]} objects\n\t */\n\tremove(objects) {\n\t\tif (objects instanceof Trigger) {\n\t\t\tobjects = [objects]\n\t\t}\n\n\t\tthis.triggers = this.triggers.filter((trigger) => {\n\t\t\tlet hit = false\n\n\t\t\tobjects.each((object) => {\n\t\t\t\tif (object == trigger) {\n\t\t\t\t\thit = true\n\t\t\t\t}\n\t\t\t})\n\n\t\t\treturn !hit\n\t\t})\n\t}\n\n\t/**\n\t * Lookup one or multiple triggers by a query string\n\t * @param {string} selector\n\t * @returns {Trigger[]}\n\t */\n\tquery(selector) {\n\t\treturn this.triggers.filter((trigger) => {\n\t\t\tconst element = trigger.element\n\t\t\tconst parent = element.parentNode\n\t\t\tconst nodes = [].slice.call(parent.querySelectorAll(selector))\n\n\t\t\treturn nodes.indexOf(element) > -1\n\t\t})\n\t}\n\n\t/**\n\t * Lookup one or multiple triggers by a certain HTMLElement or NodeList\n\t * @param {HTMLElement|HTMLElement[]|NodeList} element\n\t * @returns {Trigger|Trigger[]|null}\n\t */\n\tsearch(element) {\n\t\tconst found = this.triggers.filter((trigger) => {\n\t\t\tif (element instanceof NodeList || Array.isArray(element)) {\n\t\t\t\tlet hit = false\n\n\t\t\t\telement.each((el) => {\n\t\t\t\t\tif (trigger.element == el) {\n\t\t\t\t\t\thit = true\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\treturn hit\n\t\t\t}\n\n\t\t\treturn trigger.element == element\n\t\t})\n\n\t\treturn found.length == 0 ? null : (found.length > 1 ? found : found[0])\n\t}\n\n\t/**\n\t * Calls a function on all triggers\n\t * @param {(function())} callback\n\t */\n\tcall(callback) {\n\t\tthis.triggers.each(callback)\n\t}\n}\n"],"sourceRoot":""}